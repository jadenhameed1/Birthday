(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[857],{16699:function(e,t,s){Promise.resolve().then(s.bind(s,15214))},15214:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return i}});var n=s(57437),r=s(2265),a=s(280);function i(){let[e,t]=(0,r.useState)([]),[s,i]=(0,r.useState)(""),[o,c]=(0,r.useState)(null),[l,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{u()},[]);let u=async()=>{try{let{data:e,error:s}=await a.O.from("conversations").select("*").order("created_at",{ascending:!1}).limit(1);if(s)throw s;if(e&&e.length>0){c(e[0].id);let{data:s,error:n}=await a.O.from("messages").select("*").eq("conversation_id",e[0].id).order("created_at",{ascending:!0});if(n)throw n;s&&t(s)}else{let{data:e,error:t}=await a.O.from("conversations").insert([{title:"New Conversation"}]).select().single();if(t)throw t;e&&c(e.id)}}catch(e){console.error("Error loading conversation:",e)}},f=async()=>{if(!s.trim())return;let n=[...e,{role:"user",content:s,created_at:new Date}];t(n),i(""),d(!0);try{var r,c;let{error:e}=await a.O.from("messages").insert([{conversation_id:o,role:"user",content:s}]);if(e)throw e;let{data:i,error:l}=await a.O.from("business_context").select("*");if(l)throw l;let d="You are an AI Business Assistant for ".concat((null==i?void 0:null===(r=i.find(e=>"app_name"===e.key))||void 0===r?void 0:r.value)||"Tech Ecosystem",". \n      ").concat((null==i?void 0:null===(c=i.find(e=>"app_description"===e.key))||void 0===c?void 0:c.value)||"A business platform",".\n      \n      Provide specific, actionable advice related to:\n      - Business growth strategies\n      - Customer acquisition\n      - Revenue optimization\n      - Market positioning\n      - Operational efficiency\n      \n      Use the conversation history and be genuinely helpful."),u=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:n,systemPrompt:d})});if(!u.ok)throw Error("API response not ok");let f=await u.json(),m={role:"assistant",content:f.response,created_at:new Date},{error:p}=await a.O.from("messages").insert([{conversation_id:o,role:"assistant",content:f.response}]);if(p)throw p;t(e=>[...e,m])}catch(s){console.error("Error sending message:",s);let e={role:"assistant",content:"I'm experiencing some technical difficulties. Let me try that again... Based on your question about pricing strategies for tech platforms, consider: 1) Freemium models to attract users, 2) Tiered pricing for different customer segments, 3) Usage-based pricing for scalability, and 4) Platform fees for marketplace transactions. What specific aspect are you most concerned about?",created_at:new Date};t(t=>[...t,e])}finally{d(!1)}};return(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map((e,t)=>(0,n.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,n.jsx)("div",{className:"max-w-xs md:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:e.content})},t)),l&&(0,n.jsx)("div",{className:"flex justify-start",children:(0,n.jsx)("div",{className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg",children:"Thinking..."})})]}),(0,n.jsx)("div",{className:"p-4 border-t",children:(0,n.jsxs)("div",{className:"flex space-x-2",children:[(0,n.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),placeholder:"Ask about pricing, growth, marketing...",className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,n.jsx)("button",{onClick:f,disabled:l,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:"Send"})]})})]})}},280:function(e,t,s){"use strict";s.d(t,{O:function(){return n}});let n=(0,s(39683).eI)("https://pgmivzxdvzeznmukjms.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBnbWl2enhkdmV6YXpubXVram1zIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2MzYyNTcsImV4cCI6MjA3NTIxMjI1N30.eh1Pix9M13M9gtrTzn8pF7bd3WAKVA6ZUu0SXLJ44C4")}},function(e){e.O(0,[683,971,117,744],function(){return e(e.s=16699)}),_N_E=e.O()}]);