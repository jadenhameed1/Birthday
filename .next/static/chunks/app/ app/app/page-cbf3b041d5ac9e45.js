(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[57],{93926:function(e,t,r){Promise.resolve().then(r.bind(r,22933))},22933:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(57437),n=r(2265),a=r(280);function i(){let[e,t]=(0,n.useState)([]),[r,i]=(0,n.useState)(""),[o,l]=(0,n.useState)(null),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>{u()},[]);let u=async()=>{try{let{data:e,error:r}=await a.O.from("conversations").select("*").order("created_at",{ascending:!1}).limit(1);if(r)throw r;if(e&&e.length>0){l(e[0].id);let{data:r,error:s}=await a.O.from("messages").select("*").eq("conversation_id",e[0].id).order("created_at",{ascending:!0});if(s)throw s;r&&t(r)}else{let{data:e,error:t}=await a.O.from("conversations").insert([{title:"New Conversation"}]).select().single();if(t)throw t;e&&l(e.id)}}catch(e){console.error("Error loading conversation:",e)}},f=async()=>{if(!r.trim())return;let s=[...e,{role:"user",content:r,created_at:new Date}];t(s),i(""),d(!0);try{var n,l;let{error:e}=await a.O.from("messages").insert([{conversation_id:o,role:"user",content:r}]);if(e)throw e;let{data:i,error:c}=await a.O.from("business_context").select("*");if(c)throw c;let d="You are an AI Business Assistant for ".concat((null==i?void 0:null===(n=i.find(e=>"app_name"===e.key))||void 0===n?void 0:n.value)||"Tech Ecosystem",". \n      ").concat((null==i?void 0:null===(l=i.find(e=>"app_description"===e.key))||void 0===l?void 0:l.value)||"A business platform",".\n      \n      Provide specific, actionable advice related to:\n      - Business growth strategies\n      - Customer acquisition\n      - Revenue optimization\n      - Market positioning\n      - Operational efficiency\n      \n      Use the conversation history and be genuinely helpful."),u=await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({messages:s,systemPrompt:d})});if(!u.ok)throw Error("API response not ok");let f=await u.json(),m={role:"assistant",content:f.response,created_at:new Date},{error:p}=await a.O.from("messages").insert([{conversation_id:o,role:"assistant",content:f.response}]);if(p)throw p;t(e=>[...e,m])}catch(r){console.error("Error sending message:",r);let e={role:"assistant",content:"I'm experiencing some technical difficulties. Let me try that again... Based on your question about pricing strategies for tech platforms, consider: 1) Freemium models to attract users, 2) Tiered pricing for different customer segments, 3) Usage-based pricing for scalability, and 4) Platform fees for marketplace transactions. What specific aspect are you most concerned about?",created_at:new Date};t(t=>[...t,e])}finally{d(!1)}};return(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[e.map((e,t)=>(0,s.jsx)("div",{className:"flex ".concat("user"===e.role?"justify-end":"justify-start"),children:(0,s.jsx)("div",{className:"max-w-xs md:max-w-md px-4 py-2 rounded-lg ".concat("user"===e.role?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:e.content})},t)),c&&(0,s.jsx)("div",{className:"flex justify-start",children:(0,s.jsx)("div",{className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-lg",children:"Thinking..."})})]}),(0,s.jsx)("div",{className:"p-4 border-t",children:(0,s.jsxs)("div",{className:"flex space-x-2",children:[(0,s.jsx)("input",{type:"text",value:r,onChange:e=>i(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),placeholder:"Ask about pricing, growth, marketing...",className:"flex-1 px-3 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,s.jsx)("button",{onClick:f,disabled:c,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50",children:"Send"})]})})]})}},280:function(e,t,r){"use strict";r.d(t,{O:function(){return s}});let s={from:()=>({select:()=>({order:()=>({limit:()=>Promise.resolve({data:[],error:null})}),eq:()=>Promise.resolve({data:[],error:null}),insert:()=>Promise.resolve({data:null,error:null})})})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=93926)}),_N_E=e.O()}]);